<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Accountant Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Space Grotesk', sans-serif;
      background: #ffffff;
      color: #000000;
      margin: 0;
      padding: 20px;
      font-size: 14px;
    }
    h1, h2 {
      border-bottom: 2px solid #000;
      font-size: 18px;
    }
    .section {
      margin-bottom: 40px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input[type="number"] {
      width: 200px;
      padding: 5px;
      margin-bottom: 10px;
      font-size: 14px;
    }
    .highlight {
      color: #d3ff00;
      font-weight: bold;
    }
    .summary {
      background: #000;
      color: #d3ff00;
      padding: 10px;
      margin-top: 20px;
    }
    button {
      background-color: #000;
      color: #d3ff00;
      border: none;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      opacity: 0.8;
    }
    .log {
      margin-top: 30px;
    }
    .log-entry {
      font-size: 13px;
      border-bottom: 1px solid #ddd;
      padding: 5px 0;
    }
  </style>
</head>
<body>
  <h1>The Accountant</h1>

  <div class="section">
    <h2>Income</h2>
    <label>Alexandra Marks (Welding): $<input type="number" id="income1" value="0"></label>
    <label>Ian Cochran (Contract Work): $<input type="number" id="income2" value="0"></label>
    <label>Work-Study (School): $<input type="number" id="income3" value="0"></label>
    <label>Commissions (Chainmail/Web): $<input type="number" id="income4" value="0"></label>
  </div>

  <div class="section">
    <h2>Expenses</h2>
    <label>AmEx Credit Card: $<input type="number" id="expense1" value="0"></label>
    <label>Personal Loan: $<input type="number" id="expense2" value="0"></label>
    <label>Healthcare: $<input type="number" id="expense3" value="0"></label>
    <label>Life Insurance: $<input type="number" id="expense4" value="0"></label>
    <label>Domain/Website: $<input type="number" id="expense5" value="0"></label>
    <label>Software Subscriptions: $<input type="number" id="expense6" value="0"></label>
    <label>Optry: $<input type="number" id="expense7" value="0"></label>
  </div>

  <button onclick="calculateAndLog()">Log & Calculate</button>
  <button onclick="exportCSV()">Export CSV</button>

  <div class="summary" id="summary">
    <p>Total Income: <span class="highlight" id="totalIncome">$0</span></p>
    <p>Total Expenses: <span class="highlight" id="totalExpenses">$0</span></p>
    <p>Net Income: <span class="highlight" id="netIncome">$0</span></p>
  </div>

  <div class="log">
    <h2>Monthly Log</h2>
    <div id="logContainer"></div>
  </div>

  <script>
    function calculateAndLog() {
      const incomeFields = ['income1', 'income2', 'income3', 'income4'];
      const expenseFields = ['expense1', 'expense2', 'expense3', 'expense4', 'expense5', 'expense6', 'expense7'];

      const incomes = incomeFields.map(id => parseFloat(document.getElementById(id).value) || 0);
      const expenses = expenseFields.map(id => parseFloat(document.getElementById(id).value) || 0);

      const totalIncome = incomes.reduce((a, b) => a + b, 0);
      const totalExpenses = expenses.reduce((a, b) => a + b, 0);
      const netIncome = totalIncome - totalExpenses;

      document.getElementById('totalIncome').textContent = `$${totalIncome.toFixed(2)}`;
      document.getElementById('totalExpenses').textContent = `$${totalExpenses.toFixed(2)}`;
      document.getElementById('netIncome').textContent = `$${netIncome.toFixed(2)}`;

      const now = new Date();
      const logEntry = {
        date: now.toLocaleDateString(),
        income: totalIncome,
        expenses: totalExpenses,
        net: netIncome
      };

      let logs = JSON.parse(localStorage.getItem('financeLogs') || '[]');
      logs.push(logEntry);
      localStorage.setItem('financeLogs', JSON.stringify(logs));

      renderLogs();
    }

    function renderLogs() {
      const container = document.getElementById('logContainer');
      container.innerHTML = '';
      const logs = JSON.parse(localStorage.getItem('financeLogs') || '[]');

      logs.forEach(entry => {
        const div = document.createElement('div');
        div.className = 'log-entry';
        div.textContent = `${entry.date} â€” Income: $${entry.income.toFixed(2)} | Expenses: $${entry.expenses.toFixed(2)} | Net: $${entry.net.toFixed(2)}`;
        container.appendChild(div);
      });
    }

    function exportCSV() {
      const logs = JSON.parse(localStorage.getItem('financeLogs') || '[]');
      if (logs.length === 0) return;

      const headers = ['Date', 'Income', 'Expenses', 'Net'];
      const rows = logs.map(entry => [entry.date, entry.income, entry.expenses, entry.net]);
      const csvContent = [headers, ...rows]
        .map(row => row.join(","))
        .join("\n");

      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.setAttribute("href", url);
      link.setAttribute("download", "finance_logs.csv");
      link.style.display = "none";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    window.onload = renderLogs;
  </script>
</body>
</html>
